## Typora图片上传

#### 第一步-------注册一个博客园账户

[点击跳转到博客园](https://www.cnblogs.com/) 

然后注册账号 

#### 第二步 --- 配置上传器

- 下载上传图片的软件

[官方下载地址](https://github.com/xiajingren/EasyBlogImageForTypora/releases/)

![image-20221230161005957](https://img2023.cnblogs.com/blog/2213660/202212/2213660-20221230161005981-283531836.png) 

将软件提取出来

为了方便可以提取到Typora的安装路径下

![image-20210313122640199](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313123857838-975987838.png)

- 配置上传器

双击进入

依次配置

1. 博客地址

   ```shell
   # 点击我的博客，复制网址
   https://www.cnblogs.com/博客名/
   ```

2. 博客ID

   ```shell
   博客名
   ```

3. 用户名

   ```shell
   登录时的用户名
   ```

4. 密码

   ```shell
   用户密码 (弃用)
   博客园更新了令牌系统，所以这里要去博客园后台创建一下令牌，然后输入
   ```

5. 博客MetaWeblog API地址

   ```shell
   https://rpc.cnblogs.com/metaweblog/博客名
   ```

6. **配置完成**

![image-20210313123658641](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313123853062-1449164287.png)

#### Typora中配置

![image-20210313123846704](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313123847604-617934937.png)

- 文件 ==> 偏好设置 ==> 图像

- 插入图片时设置：

  - 先设置为：**上传图片** 
  - 下面勾选 **对本地位置的图片应用** 和 **允许根据YAML 设置自动上传图片** 

- 上传服务器设置

  - 上传服务选择：Custom Command
  - 命令：为上传器的路径

- 然后验证图片上传

  ![image-20210313124442003](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313124442924-938164790.png) 



#### 然后我们来试一下

![image-20210313125004551](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313125005466-1503786023.png)

**大功告成！！！ **

![image-20210314164808950](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210314164809854-1939873041.png)

#### 后续完善处理

找到路径s

```shell
C:\Users\用户名\AppData\Roaming\Typora\typora-user-images
```

这个路径是当我们直接将截屏复制到Typora中时，图片保存的路径，因为图片都上传了，所以本地的图片就可以直接当垃圾删除

有两个选择

1. 手动清理垃圾
2. 自动清理垃圾

*手动清理* 就是时不时的打开这个文件夹，然后删除图片 

*自动清理* 就是要设定一个计划 

##### 自动清理

1. 右击 **我的电脑(计算机)** ==>  **管理** 进入计算机管理

![image-20210313125956214](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313130002652-318850638.png)

2. 选择 **系统工具**   ==>  **任务计划程序**    ==> **创建一个新计划** 到创建任务界面

![image-20210313130328800](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313130329686-639084688.png) 

3. 点击 **触发器**  ==>  **新建**  到新建触发器

![image-20210313130523502](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313130524442-1588700166.png) 

4. 这里按下述设置
    - 开始任务：登录时
    - 特定的用户
    - 然后点击确定

![image-20210313130716619](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313130717536-1326949627.png) 

5. 新建一个文本文件，文件中输入

```bash
del C:\Users\用户名\AppData\Roaming\Typora\typora-user-images\*.*  /s /q
exit
```

保存，修改文件为 **垃圾清理.bat** ,可以保存到上述 **图片上传器的位置** 

![image-20210313132714509](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313132715452-1018335461.png) 

6. 在 **创建任务** 窗口点击 **操作**  ==>  **新建**  浏览到上述脚本文件的位置点击确定

![image-20210313132906748](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313132907659-1126112646.png) 

7. 设置 **条件** 

![image-20210313133029056](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210313133029999-1248116126.png) 

8. 点击确定，完成！！以后每次计算机开机 登录的时候，该脚本就会运行，然后清理图片

